!function(a){a.fn.onepagescroll=function(b,c){function d(){l[0]?m.on("mousewheel DOMMouseScroll",function(a){if(t){t=!1;var b=a.originalEvent.wheelDelta||a.originalEvent.detail,c=a.originalEvent.wheelDelta;e(b>0&&c?0:b>0&&!c?1:0>b&&c?1:0)}}):(m.on("touchstart",function(a){a.preventDefault(),r.sy=a.originalEvent.touches[0].pageY}),m.on("touchmove",function(a){var b=a.originalEvent.touches[0].pageY,c=b-r.sy;r.my=b,r.distance=c}),m.on("touchend",function(a){return Math.abs(r.distance)>b.disance?void e(r.distance>0?0:1):!1})),a(window).on("resize",function(){k=window.innerHeight,m.css({transform:"translateY("+-p*k+")","-moz-transform":"translateY("+-p*k+")","-webkit-transform":"translateY("+-p*k+")"})})}function e(a,d,e){var f=0,g=!1,h=function(a,c){0!=c&&(c="-100%"),a.animate({top:c},1e3*b.animationTime,function(){t=!0})};if(q=p,d||(a?o-1>p?p++:b.cycle?p=0:g=1:p>0?p--:b.cycle?p=o-1:g=1),f=p*-k,q==p){if(p==o-1&&a)return void(t=!0);if(0==p&&!a)return void(t=!0)}if(l[1])g?t=!0:m.css({transform:"translateY("+f+"px)","-moz-transform":"translateY("+f+"px)","-webkit-transform":"translateY("+f+"px)"}),i(m[0],function(){t=!0});else{var j;if(d){var r=p-e;if(r>0)for(var s=e;p>s;s++)j=n.eq(s),f=-k,h(j,f);else for(var s=p;e>s;s++)j=n.eq(s),f=0,h(j,f)}else j=n.eq(q),f=-k,a||(f=0,j=n.eq(p)),h(j,f)}c&&c({index:p,viewbox:n.eq(p)})}function f(){l=g(),a("html,body").css({overflow:"hidden",width:"100%",height:"100%"}),m.css({width:"100%",height:"100%"}),n.css({width:"100%",height:"100%"}),l[1]?m.css({transform:"translateY(0)","-moz-transform":"translateY(0)","-webkit-transform":"translateY(0)",transition:"all "+b.animationTime+"s","-moz-transition":"all "+b.animationTime+"s","-webkit-transition":"all "+b.animationTime+"s"}):(b.cycle=!1,m.css({position:"relative"}),n.css({position:"absolute",top:"0"}),n.each(function(b){a(this).css("z-index",o-b)})),k=window.innerHeight,d()}function g(){var a,b=navigator.userAgent,c="pc";return b.match(/Android/i)?c="an":b.match(/BlackBerry/i)?c="bb":b.match(/iPhone|iPad|iPod/i)?c="ios":b.match(/IEMobile/i)?c="wp":b.match(/Mobile/i)&&(c="other"),a="pc"==c?h()?[1,1]:[1,0]:[0,1]}function h(){var a,b=["webkit","Moz","ms","o"],c=[],d=document.documentElement.style,e=function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})};for(a in b)c.push(e(b[a]+"-transition"));c.push(e("transition"));for(a in c)if(c[a]in d)return!0;return!1}function i(a,b){var c=function(){b(a),a.removeEventListener("webkitTransitionEnd",c,!1),a.removeEventListener("transitionend",c,!1),a.removeEventListener("MSTransitionEnd",c,!1)};a.addEventListener("webkitTransitionEnd",c,!1),a.addEventListener("transitionend",c,!1),a.addEventListener("MSTransitionEnd",c,!1)}function j(a){var b=u.index;p=a,u.index=a,q-a>0?l[1]?e(1,1):e(1,1,b):l[1]?e(0,1):e(0,1,b)}if(!b)return!1;var k,l,m=this,n=a(b.box,m),o=n.length,p=0,q=-1,r={},s={disance:100,cycle:1,animationTime:.8},t=1,u={index:p,viewbox:n.eq(p),change:j};return b=a.extend(s,b),f(),u}}(jQuery);
